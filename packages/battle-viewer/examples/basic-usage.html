<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BattleViewer Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    battle-viewer {
      width: 100%;
      height: 400px;
      margin: 20px 0;
    }
    
    .controls {
      margin: 20px 0;
    }
    
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    
    button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <h1>BattleViewer Example</h1>
  <p>This example demonstrates the basic usage of the BattleViewer web component.</p>
  
  <battle-viewer id="viewer"></battle-viewer>
  
  <div class="controls">
    <button onclick="loadBasicBattle()">Load Basic Battle</button>
    <button onclick="loadComplexBattle()">Load Complex Battle</button>
    <button onclick="clearBattle()">Clear</button>
  </div>

  <script type="module">
    // Import the web component from source (development) or dist (production)
    import "@florelabs/battle-viewer";

    // Battle data examples with hexagonal coordinates
    const basicBattle = {
      participants: [
        {
          id: "hero",
          name: "Hero",
          initialPosition: { q: 1, r: 1 },
          spriteConfig: {
            spritesheet: "", // Empty for now - will use default rendering
            size: { width: 48, height: 48 }
          }
        },
        {
          id: "monster",
          name: "Monster", 
          initialPosition: { q: -2, r: 1 },
          spriteConfig: {
            spritesheet: "", // Empty for now - will use default rendering
            size: { width: 48, height: 48 }
          }
        }
      ],
      turns: [
        {
          id: "turn-1",
          timestamp: Date.now(),
          actions: [
            {
              type: "move",
              actor: "hero",
              path: [{ q: 1, r: 1 }, { q: 0, r: 1 }, { q: -1, r: 1 }]
            }
          ]
        },
        {
          id: "turn-2", 
          timestamp: Date.now() + 1000,
          actions: [
            {
              type: "attack",
              actor: "hero",
              target: "monster",
              position: { q: -2, r: 1 }
            }
          ]
        }
      ]
    };

    const complexBattle = {
      participants: [
        {
          id: "player1",
          name: "Knight",
          initialPosition: { q: 2, r: 0 },
          spriteConfig: {
            spritesheet: "",
            size: { width: 48, height: 48 }
          }
        },
        {
          id: "player2", 
          name: "Mage",
          initialPosition: { q: 2, r: -1 },
          spriteConfig: {
            spritesheet: "",
            size: { width: 48, height: 48 }
          }
        },
        {
          id: "enemy1",
          name: "Orc",
          initialPosition: { q: -2, r: 0 },
          spriteConfig: {
            spritesheet: "",
            size: { width: 48, height: 48 }
          }
        },
        {
          id: "enemy2",
          name: "Goblin", 
          initialPosition: { q: -2, r: 1 },
          spriteConfig: {
            spritesheet: "",
            size: { width: 48, height: 48 }
          }
        }
      ],
      turns: [
        {
          id: "turn-1",
          timestamp: Date.now(),
          actions: [
            {
              type: "move",
              actor: "player1",
              path: [{ q: 2, r: 0 }, { q: 1, r: 0 }, { q: 0, r: 0 }]
            },
            {
              type: "skill",
              actor: "player2",
              target: "enemy1",
              position: { q: -2, r: 0 },
              data: { skillName: "Fireball" }
            }
          ]
        },
        {
          id: "turn-2",
          timestamp: Date.now() + 2000,
          actions: [
            {
              type: "attack",
              actor: "enemy1", 
              target: "player1",
              position: { q: 0, r: 0 }
            },
            {
              type: "move", 
              actor: "enemy2",
              path: [{ q: -2, r: 1 }, { q: -1, r: 1 }, { q: 0, r: 1 }]
            }
          ]
        }
      ]
    };

    // Make functions global for button onclick
    window.loadBasicBattle = () => {
      const viewer = document.getElementById("viewer");
      viewer.setBattleData(basicBattle);
    };

    window.loadComplexBattle = () => {
      const viewer = document.getElementById("viewer");
      viewer.setBattleData(complexBattle);
    };

    window.clearBattle = () => {
      const viewer = document.getElementById("viewer");
      viewer.setBattleData({ participants: [], turns: [] });
    };

    // Load basic battle on page load
    window.addEventListener("load", () => {
      loadBasicBattle();
    });
  </script>
</body>
</html>